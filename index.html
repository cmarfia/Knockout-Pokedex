<!DOCTYPE html>
<html>
<head>
    <title>Pokedex</title>
    <link href="Content/bootstrap.min.css" rel="stylesheet"/>
    <link href="styles.css" rel="stylesheet" />
</head>
<body>
    <div class="container">
        <header>
            <h3>Pokedex Demo</h3>
        </header>
        <div class="row" id="pokedex-grid" data-bind="visible: activePokemon() == 0">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th></th>
                        <th>Name</th>
                        <th>Health</th>
                        <th>Attack</th>
                        <th>Defense</th>
                        <th>SP Attack</th>
                        <th>SP Defense</th>
                        <th>Speed</th>
                        <th>Height</th>
                        <th>Weight</th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: pokedex">
                    <tr data-bind="click: $parent.activatePokemon.bind($data)">
                        <td><img data-bind="attr: { src: imageSrc}" /></td>
                        <td data-bind="text: displayName"></td>
                        <td data-bind="text: hp"></td>
                        <td data-bind="text: attack"></td>
                        <td data-bind="text: defense"></td>
                        <td data-bind="text: spAttack"></td>
                        <td data-bind="text: spDefense"></td>
                        <td data-bind="text: speed"></td>
                        <td data-bind="text: height"></td>
                        <td data-bind="text: weight"></td>
                    </tr>
                </tbody>
            </table>
            <!-- ko if: pager().TotalItemCount() > 0 -->
            <div class="pagination" data-bind="template: { name: 'tpl-pager', data: pager }"></div>
            <!-- /ko -->
        </div>
        <div class="row">
            <div class="col-xs-4" id="sprites-display" data-bind="visible: activePokemon() != 0">
                <input type="text" data-bind="value: activePokemon" />
                <!-- ko foreach: sprites -->
                    <img data-bind="attr: { src: imageSrc }" />
                <!-- /ko -->
            </div>
        </div>
    </div>

    <!-- templates --> 
    <script type="text/html" id="tpl-pager">
        <div class="pagexofx">
            <span data-bind="text: FirstItemIndex"></span>
            -
        <span data-bind="text: LastItemIndex"></span>
            of
        <strong>
            <span data-bind="text: TotalItemCount"></span>
        </strong>
            total results.
        </div>
        <div class="btn-group">
            <!-- ko if:CurrentPage() === 1 -->
            <button type="button" class="btn btn-default disabled">&laquo;&laquo;</button>
            <!-- /ko -->
            <!-- ko ifnot:CurrentPage() === 1 -->
            <button type="button" class="btn btn-default" data-bind="click: function () { CurrentPage(1); }">&laquo;&laquo;</button>
            <!-- /ko -->
            <!-- ko if:HasPrevPage -->
            <button type="button" class="btn btn-default" data-bind="click: function () { CurrentPage(CurrentPage() - 1); }">&laquo;</button>
            <!-- /ko -->
            <!-- ko ifnot:HasPrevPage -->
            <button type="button" class="btn btn-default disabled" >&laquo;</button>
            <!-- /ko -->
            <!-- ko foreach:Pages -->
                <!-- ko if:$data === $parent.CurrentPage() -->
                <button type="button" class="btn btn-default active" data-bind="text: $data"></button>
                <!-- /ko -->
                <!-- ko if:$data !== $parent.CurrentPage() -->
                <button type="button" class="btn btn-default" data-bind="text: $data, click: function () { $parent.CurrentPage($data); }"></button>
                <!-- /ko -->
            <!-- /ko -->
            <!-- ko if:HasNextPage -->
                <button type="button" class="btn btn-default" data-bind="click: function () { CurrentPage(CurrentPage() + 1); }">&raquo;</button>
            <!-- /ko -->
            <!-- ko ifnot:HasNextPage -->
                <button type="button" class="btn btn-default disabled">&raquo;</button>
            <!-- /ko -->
            <!-- ko ifnot:CurrentPage() === LastPage() -->
                <button type="button" class="btn btn-default" data-bind="click: function () { CurrentPage(LastPage()); }">&raquo;&raquo;</button>
            <!-- /ko -->
            <!-- ko if:CurrentPage() === LastPage() -->
                <button type="button" class="btn btn-default disabled">&raquo;&raquo;</button>
            <!-- /ko -->
        </div>
    </script>
    
    <script src="Scripts/jquery-2.1.3.js"></script>
    <script src="Scripts/bootstrap.min.js"></script>
    <script src="Scripts/knockout-3.2.0.js"></script>
    <script src="Scripts/knockout-postbox.js"></script>
    <script src="JavaScript/ko.pager.js"></script>

    <!-- Load View Models -->
    <script src="ViewModels/WizardViewModel.js"></script>
    <script src="ViewModels/DescriptionsViewModel.js"></script>
    <script src="ViewModels/EvolutionChainViewModel.js"></script>
    <script src="ViewModels/MovesViewModel.js"></script>
    <script src="ViewModels/PokedexViewModel.js"></script>
    <script src="ViewModels/SpriteViewModel.js"></script>
    <script src="ViewModels/StatsViewModel.js"></script>
    <script src="ViewModels/TypesViewModel.js"></script>
</body>
</html>

<!--<script>
    var uri = 'api/pokedex/',
        doneFunc = function (data) {
            console.log(data);
            $("#message-box").append("<p>" + JSON.stringify(data) + "</p>");
        };


    $(document).ready(function () {
        $.ajax({
            url: uri + 'GetPokedex',
            type: "GET",
            data: { pageNumber: 1, pageSize: 10 },
            dataType: "json"
        })
        .done(doneFunc);

        $.ajax({
            url: uri + 'GetPokemon',
            type: "GET",
            data: { pokemonId: 1 },
            dataType: "json"
        })
        .done(doneFunc);

        $.ajax({
            url: uri + 'GetSpritesByPokemon',
            type: "GET",
            data: { pokemonId: 732 },
            dataType: "json"
        })
        .done(doneFunc);

        $.ajax({
            url: uri + 'GetSprite',
            type: "GET",
            data: { spriteId: 1 },
            dataType: "json"
        })
        .done(doneFunc);

        $.ajax({
            url: uri + 'GetDescriptionsByPokemon',
            type: "GET",
            data: { pokemonId: 1 },
            dataType: "json"
        })
        .done(doneFunc);

        $.ajax({
            url: uri + 'GetDescription',
            type: "GET",
            data: { descriptionId: 1 },
            dataType: "json"
        })
        .done(doneFunc);

        $.ajax({
            url: uri + 'GetTypesByPokemon',
            type: "GET",
            data: { pokemonId: 1 },
            dataType: "json"
        })
        .done(doneFunc);

        $.ajax({
            url: uri + 'GetType',
            type: "GET",
            data: { typeId: 1 },
            dataType: "json"
        })
        .done(doneFunc);

        $.ajax({
            url: uri + 'GetMovesByPokemon',
            type: "GET",
            data: { pokemonId: 1 },
            dataType: "json"
        })
        .done(doneFunc);

        $.ajax({
            url: uri + 'GetMove',
            type: "GET",
            data: { moveId: 1 },
            dataType: "json"
        })
        .done(doneFunc);

        $.ajax({
            url: uri + 'GetAbilitiesByPokemon',
            type: "GET",
            data: { pokemonId: 1 },
            dataType: "json"
        })
        .done(doneFunc);

        $.ajax({
            url: uri + 'GetAbility',
            type: "GET",
            data: { abilityId: 1 },
            dataType: "json"
        })
        .done(doneFunc);

        $.ajax({
            url: uri + 'GetEvolutionChainByPokemon',
            type: "GET",
            data: { pokemonId: 732 },
            dataType: "json"
        })
        .done(doneFunc);

        $.ajax({
            url: uri + 'GetNavigationByPokemon',
            type: "GET",
            data: { pokemonId: 1 },
            dataType: "json"
        })
        .done(doneFunc);
    });
</script>-->